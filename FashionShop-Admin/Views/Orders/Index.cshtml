@model List<Order>

@{
	ViewBag.Title = "Orders List";
}
@section Styles {
	<!-- plugin css file  -->
	<link rel="stylesheet" href="~/plugin/datatables/responsive.dataTables.min.css">
	<link rel="stylesheet" href="~/plugin/datatables/dataTables.bootstrap5.min.css">
}
@section Scripts {
	<script src="~/bundles/dataTables.bundle.js"></script>
	<script>
		$('#myDataTable')
		.addClass('nowrap')
		.dataTable({
		responsive: true,
		columnDefs: [
		{ targets: [-1, -3], className: 'dt-body-right' }
		]
		});
	</script>
	<script>
		$(document).on('click','button', function (event) {
			event.preventDefault();
			console.log("đã xoá")
			var id = event.target.id;
			console.log('tepm1 ' + id)
			var url = "@Url.Action("RemoveById", "Orders")";
			console.log(url)
			$.ajax({
				method: "delete",
				url: url,
				data: {
					id: id
				},
				success:function (reponse){
					console.log("Successfully")
					var deleteRow += "
					
					";
				},
				error: function(error){
					console.log("Error: " + error)
				}
			})
		});
	</script>
}
<!-- Body: Body -->

<div class="body d-flex py-3">
	<div class="container-xxl">
		<h2 class="fw-bold">@ViewBag.Title</h2>
		<div class="row g-3 mb-3">
			<div class="col-md-12">
				<div class="card">
					<div class="card-body">
						<table id="myDataTable" class="table table-hover text-center align-middle mb-0" style="width: 100%;">
							<thead>
								<tr>
									<th>Order Id</th>
									<th>Store</th>
									<th>Customer</th>
									<th>Employee</th>
									<th>Order Date</th>
									<th>Total Amount</th>
									<th>Payment Method</th>
									<th>Status</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var order in Model)
								{
									<tr data-id="@order.OrderId">
										<td><a asp-action="Details" asp-controller="Orders" asp-route-id="@order.OrderId"><strong>#@order.OrderId</strong></a></td>
										<td>@order.Store.StoreName</td>
										<td>@order.Customer.CustomerName</td>
										<td>@order.Employee.EmployeeName</td>
										<td>@order.OrderDate</td>
										<td>@order.TotalAmount</td>
										<td>
											<span class="bg-info-light rounded p-1"><strong>@order.PaymentMethod</strong></span>
										</td>
										<td>
											@{
												string bgStatus = order.Status switch
												{
													"pending" => "bg-warning",
													"completed" => "bg-success",
													_ => "bg-secondary"
												};
											}
											<span class="@bgStatus rounded p-1"><strong>@order.Status</strong></span>
										</td>
										<td>
											<div class="btn-group" role="group" aria-label="Basic outlined example">
												<button type="submit" class="btn btn-outline-secondary" id="@order.OrderId"><i class="icofont-ui-delete text-danger" id="@order.OrderId"></i></button>
											</div>
										</td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

